<!DOCTYPE html><html lang="en"><head><title>Linux and sleep mode wakeup - Lietu's tech blog - Lietu's homepage</title><meta name="description" content="Janne Enberg, aka. Lietu's homepage"><meta name="keywords" content="Janne Enberg Lietu programmer IT generalist homepage"><link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,800' rel='stylesheet' type='text/css'><link href='/assets/global-01852371966e6ab602598d856f6fb404.css' rel='stylesheet' type='text/css'/> <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script><script src='/assets/global-eb0b8eea4ca1154082ff522f29d0194d.js'></script></head><body> <header><h1><a href="/">Lietu's homepage</a></h1> </header><div class="container"><div class="row"><div class="page span12"><div class="navbar navbar-inverse"><div class="navbar-inner"><div class="container"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/" title="Home"><i class="icon-home icon-white"></i></a></li><li><a href="/blog.html" title="Lietu's tech blog">Tech Blog</a></li><li><a href="/about.html" title="About Lietu">About</a></li><li><a href="/credits.html" title="Credits">Credits</a></li><li><a href="/links.html" title="Links to more resources">Links</a></li><li><a href="/cv.html" title="Curriculum Vitae - Janne Enberg">Curriculum Vitae</a></li></ul></div></div></div></div><div class="content"><section class="blog" itemscope itemtype="http://schema.org/Blog"><div class="span11"><h2 itemprop="name">Lietu's tech blog</h2></span></div><div class="span11 description"><span itemprop="description">Yet another techie blog by Janne Enberg, aka. Lietu</span></div><div class="span9 blog-content"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPost" class="well"><h3 itemprop="name">Linux and sleep mode wakeup</h3><div class="post-date">Posted <span itemprop="datePublished" class="date">2012-12-23</span></div><div itemprop="articleBody"><p>I just recently battled a long time to get my Windows machine to sleep properly. That is, to automatically go to sleep mode after a timeout, not wake up from sleep mode from useless events like keyboard and mouse, and recover from sleep mode successfully.</p><p>In Linux, pretty much everything worked out of the box, even with exotic-ish hardware (Apple Mac Mini), except for not waking up from useless events.</p><h4>Preventing automatic wakeup from useless events</h4><p>So I had the issue that my Linux desktop was waking up when I touched the mouse or keyboard, this is not a good thing in general, and especially not for me since I have several cats walking around all the time.</p><p>I just recently battled for quite a while with Windows to get it to work, and it was somewhat difficult to find useful and relevant information. It was a nice reminder of how great the Linux community is when I had to do the same thing in Linux.</p><p>It took a single Google query to find all the data I needed (from the first result), and here is the script that will disable waking up from all events except the power button:</p><div class="highlight"><pre><code class="bash"><span class="k">for </span>dev in <span class="k">$(</span>cat /proc/acpi/wakeup | grep enabled | cut -f1<span class="k">)</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$dev</span> &gt; /proc/acpi/wakeup; <span class="k">done</span>
</code></pre></div><p>(Run it as <em>root</em>, <em>su -</em>, or <em>sudo -i</em>)</p><p>What it does, is list all the enabled wakeup devices (<em>cat /proc/acpi/wakeup | grep enabled</em>), and loop through the items on the first column, then echo the name of the device back to the API to toggle their state to disabled.</p><p>They say some devices' state can be reset after a reboot, so it could be useful to put that line in <strong>/etc/rc.local</strong> or similar file on your system.</p></div> <small>Copyright © 2012 Janne Enberg. All rights reserved.</small> </article></div><div class="span2 sidebar well"><h3>About</h3><div class="about-blog" itemscope itemtype="http://schema.org/Person"> <img src="/img/blog/lietu.jpg" itemprop="image"/><p>The author, <span itemprop="name">Janne Enberg</span> aka. <a href="http://lietu.net/">Lietu</a>, is an IT generalist from Espoo, Finland.</p></div><h3>Posts</h3><div class="sidebar-post"> <span class="date">2012-12-26</span> <a href="/2012/12/jekyll.html" title="Jekyll">Jekyll</a></div><div class="sidebar-post"> <span class="date">2012-12-23</span> <a href="/2012/12/linux-and-sleep-mode-wakeup.html" title="Linux and sleep mode wakeup">Linux and sleep mode wakeup</a></div><div class="sidebar-post"> <span class="date">2012-12-22</span> <a href="/2012/12/windows-and-sleep-mode.html" title="Windows and sleep mode">Windows and sleep mode</a></div><div class="sidebar-post"> <span class="date">2012-11-04</span> <a href="/2012/11/vmware-esxi-freenas-nfs-vs-iscsi.html" title="VMware ESXi + FreeNAS, NFS vs. iSCSI performance">VMware ESXi + FreeNAS, NFS vs. iSCSI performance</a></div><div class="sidebar-post"> <span class="date">2012-09-17</span> <a href="/2012/09/simple-linuxbsd-service-monitoring.html" title="Simple Linux/BSD service monitoring script">Simple Linux/BSD service monitoring script</a></div><div class="sidebar-post"> <span class="date">2012-07-29</span> <a href="/2012/07/installing-mageia-2-or-most-linux.html" title="Installing Mageia 2 (or most Linux systems) on Mac Mini 4.1 (mid 2010 edition) (and probably other Macs too)">Installing Mageia 2 (or most Linux systems) on Mac Mini 4.1 (mid 2010 edition) (and probably other Macs too)</a></div><div class="sidebar-post"> <span class="date">2012-05-02</span> <a href="/2012/05/creating-ubuntu-server-virtual-machine.html" title="Creating an Ubuntu Server virtual machine with Node.js">Creating an Ubuntu Server virtual machine with Node.js</a></div></div> </section></div></div></div><div class="push"></div></div><footer><p> Copyright © 2013 by Janne Enberg. All rights reserved.<br/> Last updated 2013-01-04 18:31:08</p> </footer><div id="imgModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="imgModalLabel" aria-hidden="true"><div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button><h3 id="imgModalLabel">Original version</h3></div><div class="modal-body"> <img/></div><div class="modal-footer"> <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div></div></body></html>